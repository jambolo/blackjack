# BlackJack Analysis

Tools for the analysis of BlackJack, written primarily in CoffeeScript.

**The implementation in Coffeescript has been deprecated. Development has moved to Julia.**

## Executables

### generate-card-frequency-data.coffee
Dealing the first deck from a 6-deck shoe is simulated 100,000,000 times. For each count, the average quantity and
density of each card (1-13) in the remaining shoe is computed. Results are written to the file
`data/cardDensitiesByCount.json`. A summary is written to the console.

### generate-count-probability-data.coffee
Noting the count after dealing half of a 6-deck shoe is simulated 100,000,000 times and the probability of
each possible count is written to the file `data/countProbabilities.json`. A summary is written to the console.

### compute-dealer-blackjack-probabilities.coffee
Computes the probability of a dealer blackjack when an ace is showing for each count.

### generate-true-count-distribution.coffee
Computes the distribution of true counts in a shoe as each card in the shoe is dealt to the deck penetration limit.
The results are written to `data/trueCountDistribution.json`. A summary is written to the console.

### generate-dealer-outcome-distribution.coffee
Computes the distribution of dealer outcomes. A summary is written to the console.

## Generated data

### cardDensitiesByCount.json
A two-dimensional array -- the average quantity of each card in a deck for each count value from -52 to +52. Generated
by `generate-card-frequency-data.coffee`

### countProbabilities.json
The probability of a particular count after dealing half of a 6-deck shoe. Generated by
`generate-count-probability-data.coffee`

### trueCountDistribution.json
For each true count, the amount of cards dealt as a fraction of the total dealt resulting in that count. Generated by
`generate-true-count-distribution.coffee`

## Summaries
Summaries of analysis results.

### Frequencies of true counts
After dealing half of a 6-deck shoe

| Count | N        | %     |
|-------|----------|-------|
| -15   | 2        | 0     |
| -14   | 8        | 0     |
| -13   | 45       | 0     |
| -12   | 319      | 0     |
| -11   | 1880     | 0     |
| -10   | 8930     | 0.01  |
| -9    | 37646    | 0.04  |
| -8    | 133030   | 0.13  |
| -7    | 408704   | 0.41  |
| -6    | 1069199  | 1.07  |
| -5    | 2418053  | 2.42  |
| -4    | 4712911  | 4.71  |
| -3    | 7897869  | 7.9   |
| -2    | 11416462 | 11.42 |
| -1    | 14234813 | 14.23 |
| 0     | 15321809 | 15.32 |
| 1     | 14238224 | 14.24 |
| 2     | 11410293 | 11.41 |
| 3     | 7898774  | 7.9   |
| 4     | 4710745  | 4.71  |
| 5     | 2419789  | 2.42  |
| 6     | 1070741  | 1.07  |
| 7     | 407675   | 0.41  |
| 8     | 133165   | 0.13  |
| 9     | 37729    | 0.04  |
| 10    | 8941     | 0.01  |
| 11    | 1852     | 0     |
| 12    | 341      | 0     |
| 13    | 42       | 0     |
| 14    | 6        | 0     |
| 15    | 3        | 0     |

Generated by `generate-count-probability-data.coffee`

### Average frequencies of low (2-6), uncounted(7-9), and high cards (A,10-K)
After dealing 5 decks from a 6-deck shoe

| Count | Low % | Uncounted % | High % |
|-------|-------|-------------|--------|
| -20   |  58.5 |   21.4      |  20.1  |
| -19   |  57.4 |   21.6      |  21    |
| -18   |  56.3 |   21.8      |  21.9  |
| -17   |  55.3 |   22        |  22.7  |
| -16   |  54.3 |   22.1      |  23.6  |
| -15   |  53.3 |   22.2      |  24.5  |
| -14   |  52.2 |   22.4      |  25.4  |
| -13   |  51.2 |   22.5      |  26.3  |
| -12   |  50.2 |   22.6      |  27.2  |
| -11   |  49.2 |   22.7      |  28.1  |
| -10   |  48.2 |   22.8      |  29    |
| -9    |  47.2 |   22.9      |  30    |
| -8    |  46.2 |   22.9      |  30.9  |
| -7    |  45.2 |   23        |  31.8  |
| -6    |  44.2 |   23        |  32.7  |
| -5    |  43.2 |   23.1      |  33.7  |
| -4    |  42.3 |   23.1      |  34.6  |
| -3    |  41.3 |   23.1      |  35.6  |
| -2    |  40.3 |   23.1      |  36.6  |
| -1    |  39.4 |   23.1      |  37.6  |
| 0     |  38.5 |   23.1      |  38.5  |
| 1     |  37.6 |   23.1      |  39.4  |
| 2     |  36.6 |   23.1      |  40.3  |
| 3     |  35.6 |   23.1      |  41.3  |
| 4     |  34.7 |   23.1      |  42.3  |
| 5     |  33.7 |   23.1      |  43.2  |
| 6     |  32.8 |   23        |  44.2  |
| 7     |  31.8 |   23        |  45.2  |
| 8     |  30.9 |   22.9      |  46.2  |
| 9     |  30   |   22.9      |  47.2  |
| 10    |  29   |   22.8      |  48.2  |
| 11    |  28.1 |   22.7      |  49.2  |
| 12    |  27.2 |   22.6      |  50.2  |
| 13    |  26.3 |   22.5      |  51.2  |
| 14    |  25.4 |   22.4      |  52.3  |
| 15    |  24.5 |   22.2      |  53.3  |
| 16    |  23.6 |   22.1      |  54.3  |
| 17    |  22.7 |   22        |  55.3  |
| 18    |  21.9 |   21.8      |  56.3  |
| 19    |  21   |   21.7      |  57.3  |
| 20    |  20.1 |   21.5      |  58.4  |
  
Generated by `generate-card-frequency-data.coffee`

### Probability of dealer blackjack when an ace is showing for each true count

| Count | %    |
|-------|------|
| -20   | 16.1 |
| -19   | 16.8 |
| -18   | 17.5 |
| -17   | 18.2 |
| -16   | 18.9 |
| -15   | 19.6 |
| -14   | 20.3 |
| -13   | 21   |
| -12   | 21.8 |
| -11   | 22.5 |
| -10   | 23.2 |
| -9    | 24   |
| -8    | 24.7 |
| -7    | 25.4 |
| -6    | 26.2 |
| -5    | 27   |
| -4    | 27.7 |
| -3    | 28.5 |
| -2    | 29.3 |
| -1    | 30   |
| 0     | 30.8 |
| 1     | 31.5 |
| 2     | 32.3 |
| 3     | 33   |
| 4     | 33.8 |
| 5     | 34.6 |
| 6     | 35.4 |
| 7     | 36.1 |
| 8     | 36.9 |
| 9     | 37.7 |
| 10    | 38.5 |
| 11    | 39.3 |
| 12    | 40.1 |
| 13    | 41   |
| 14    | 41.8 |
| 15    | 42.6 |
| 16    | 43.4 |
| 17    | 44.3 |
| 18    | 45.1 |
| 19    | 45.9 |
| 20    | 46.7 |

Generated by `compute-dealer-blackjack-probabilities.coffee`

### Occurrence of true counts in a shoe
For each card dealt from a 6-deck shoe up to the 1-deck penetration limit

| Count | %     |
|-------|-------|
| -16   | 0.01  |
| -15   | 0.01  |
| -14   | 0.02  |
| -13   | 0.04  |
| -12   | 0.06  |
| -11   | 0.11  |
| -10   | 0.18  |
| -9    | 0.3   |
| -8    | 0.48  |
| -7    | 0.73  |
| -6    | 1.25  |
| -5    | 1.95  |
| -4    | 3.18  |
| -3    | 5.23  |
| -2    | 8.87  |
| -1    | 15.93 |
| 0     | 23.23 |
| 1     | 15.94 |
| 2     | 8.89  |
| 3     | 5.24  |
| 4     | 3.19  |
| 5     | 1.95  |
| 6     | 1.19  |
| 7     | 0.79  |
| 8     | 0.48  |
| 9     | 0.3   |
| 10    | 0.18  |
| 11    | 0.11  |
| 12    | 0.06  |
| 13    | 0.04  |
| 14    | 0.02  |
| 15    | 0.01  |
| 16    | 0.01  |

Generated by `generate-true-count-distribution.coffee`.

### Distributions of dealer hand outcomes

#### Dealer does not check for blackjack:

| Showing | 17 (%) | 18 (%) | 19 (%) | 20 (%) | 21 (%) | Bust (%) |
|---------|--------|--------|--------|--------|--------|----------|
| 'Ace'   | 5.7    | 14.3   | 14.3   | 14.3   | 37.4   | 13.9     |
| 2       | 13     | 13.6   | 13.2   | 12.6   | 12     | 35.6     |
| 3       | 12.6   | 13.2   | 12.7   | 12.2   | 11.6   | 37.7     |
| 4       | 12.3   | 12.6   | 12.3   | 11.8   | 11.3   | 39.8     |
| 5       | 11.8   | 12.3   | 11.8   | 11.2   | 10.9   | 41.9     |
| 6       | 11.5   | 11.5   | 11.5   | 11     | 10.6   | 43.9     |
| 7       | 36.9   | 13.8   | 7.9    | 7.9    | 7.4    | 26.2     |
| 8       | 12.9   | 36     | 12.9   | 6.9    | 7      | 24.4     |
| 9       | 12     | 11.7   | 35.2   | 12     | 6.1    | 22.9     |
| 'Ten'   | 11.2   | 11.2   | 11.2   | 34     | 11.2   | 21.3     |

Generated by `generate-dealer-outcome-distribution.coffee`

#### Dealer checks for blackjack:
A blackjack is not included in the results because the round ends immediately.

| Showing | 17 (%) | 18 (%) | 19 (%) | 20 (%) | 21 (%) | Bust (%) |
|---------|--------|--------|--------|--------|--------|----------|
| 'Ace'   | 8.3    | 20.7   | 20.7   | 20.7   | 9.5    | 20.1     |
| 2       | 13     | 13.6   | 13.2   | 12.6   | 12     | 35.6     |
| 3       | 12.6   | 13.2   | 12.7   | 12.2   | 11.6   | 37.7     |
| 4       | 12.3   | 12.6   | 12.3   | 11.8   | 11.3   | 39.8     |
| 5       | 11.8   | 12.3   | 11.8   | 11.2   | 10.9   | 41.9     |
| 6       | 11.5   | 11.5   | 11.5   | 11     | 10.6   | 43.9     |
| 7       | 36.9   | 13.8   | 7.9    | 7.9    | 7.4    | 26.2     |
| 8       | 12.9   | 36     | 12.9   | 6.9    | 7      | 24.4     |
| 9       | 12     | 11.7   | 35.2   | 12     | 6.1    | 22.9     |
| 'Ten'   | 12.1   | 12.1   | 12.1   | 36.8   | 3.8    | 23       |

Generated by `generate-dealer-outcome-distribution.coffee`
